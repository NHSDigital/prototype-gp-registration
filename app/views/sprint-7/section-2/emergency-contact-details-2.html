<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the layout from /views/layout.html -->
{% extends 'layout.html' %}
<!-- In /views/layout.html you can: - change the header and footer - add custom CSS and JavaScript -->

<!-- Set the page title -->
{% block pageTitle %}
  GP Registration Prototypes
{% endblock %}

<!-- For adding a breadcrumb -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/breadcrumbs -->
{% block beforeContent %}{% endblock %}

<!-- For adding a Go back link -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/Go back-link -->
{% block outerContent %}{% endblock %}

<!-- For adding page content -->
<!-- Page layout code can be found at https://service-manual.nhs.uk/design-system/styles/layout -->
{% block content %}
  <section class="nhsuk-section">
    <div class="nhsuk-width-container">
      <div class="nhsuk-grid-row">
        <div class="nhsuk-grid-column-two-thirds">

          {{ backLink({
            text: "Go back",
            href: "javascript:history.go(-1)"
          }) }}

          {% if (data['who-is-being-registered'] == "dependant") %}
          <form action="/sprint-7/section-3/are-you-immunised" method="post" autocomplete="off">
          {% else %}
          <form action="/sprint-7/section-3/do-you-have-existing-conditions" method="post" autocomplete="off">
          {% endif %}

            {{ hint({
              "text": "Step 2 of 3 - Personal Details",
              "classes": "nhsuk-u-margin-bottom-2"
            }) }}

            {% if (data['who-is-being-registered'] == "dependant") %}

            {% call fieldset({
              legend: {
                "text": "What are the details of their second emergency contact?",
                "classes": "nhsuk-fieldset__legend--l",
                "isPageHeading": true
              }
            }) %}


            {{ input({
                label: {
                  "text": "Full name"
                },
                "classes": "nhsuk-u-width-two-thirds",
                "id": "ec-full-name-2",
                "name": "ec-full-name-2",
                value: data['ec-full-name-2']
              }) }}

            {{ input({
                label: {
                  "text": "Relationship to them"
                },
                "classes": "nhsuk-u-width-two-thirds",
                "id": "ec-relationship-2",
                "name": "ec-relationship-2",
                value: data['ec-relationship-2']
              }) }}

              {{ input({
                "label": {
                  "text": "Contact telephone number"
                },
                  "hint": {
                  "text": "For international number include the country code"
                },
                "classes": "nhsuk-input--width-10",
                "id": "ec-contact-tel-2",
                "name": "ec-contact-tel-2",
                value: data['ec-contact-tel-2']
              }) }}

              {{ input({
                "label": {
                  "text": "Alternate telephone number (Optional)"
                },
                  "hint": {
                  "text": "For international number include the country code"
                },
                "classes": "nhsuk-input--width-10",
                "id": "ec-contact-tel-alt-2",
                "name": "ec-contact-tel-alt-2",
                value: data['ec-contact-tel-alt-2']
              }) }}

              {{ textarea({
                "name": "contact-time-2",
                "id": "contact-time-2",
                "label": {
                  "text": "Best time to contact (Optional)"
                }
              }) }}

            {% endcall %}

            {% else %}

            {% call fieldset({
              legend: {
                "text": "What are the details of your second emergency contact?",
                "classes": "nhsuk-fieldset__legend--l",
                "isPageHeading": true
              }
            }) %}


            {{ input({
                label: {
                  "text": "Full name"
                },
                "classes": "nhsuk-u-width-two-thirds",
                "id": "ec-full-name-2",
                "name": "ec-full-name-2",
                value: data['ec-full-name-2']
              }) }}

            {{ input({
                label: {
                  "text": "Relationship to them"
                },
                "classes": "nhsuk-u-width-two-thirds",
                "id": "ec-relationship-2",
                "name": "ec-relationship-2",
                value: data['ec-relationship-2']
              }) }}

              {{ input({
                "label": {
                  "text": "Contact telephone number"
                },
                  "hint": {
                  "text": "For international number include the country code"
                },
                "classes": "nhsuk-input--width-10",
                "id": "ec-contact-tel-2",
                "name": "ec-contact-tel-2",
                value: data['ec-contact-tel-2']
              }) }}

              {{ input({
                "label": {
                  "text": "Alternate telephone number (Optional)"
                },
                  "hint": {
                  "text": "For international number include the country code"
                },
                "classes": "nhsuk-input--width-10",
                "id": "ec-contact-tel-alt-2",
                "name": "ec-contact-tel-alt-2",
                value: data['ec-contact-tel-alt-2']
              }) }}

              {{ textarea({
                "name": "contact-time-2",
                "id": "contact-time-2",
                "label": {
                  "text": "Best time to contact (Optional)"
                }
              }) }}


            {% endcall %}

            {% endif %}

            {{ button({
              "text": "Add another emergency contact",
              "classes": "nhsuk-button--secondary",
                  "href": "emergency-contact-details-2"
            }) }}

            <br>

            {{ button({
              "text": "Continue"
            }) }}

          </form>
        </div>
      </div>
    </section>

    <!-- End of content -->

  </div>
</div>
{% endblock %}
